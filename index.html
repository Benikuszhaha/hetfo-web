<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <title>H√âTF≈ê / √ñREG</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: #111;
            color: #eee;
            text-align: center;
            padding: 40px;
        }
        button {
            font-size: 20px;
            padding: 15px 30px;
            cursor: pointer;
        }
        #log {
            margin-top: 30px;
            font-size: 18px;
        }
    </style>
</head>
<body>

<h1>üéß H√âTF≈ê / √ñREG</h1>
<button onclick="startListening()">üé§ Besz√©lj</button>

<div id="log"></div>

<script>
let mode = "komoly"; // alap: komoly = H√âTF≈ê

// Besz√©dfelismer√©s
const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
recognition.lang = "hu-HU";

// TTS besz√©d
function speak(text) {
    alert("H√âTF≈ê / √ñREG mondja: " + text); // popup, hogy l√°sd azonnal
    const msg = new SpeechSynthesisUtterance(text);
    msg.lang = "hu-HU";
    msg.volume = 1;
    msg.rate = 1;
    msg.pitch = 1;
    window.speechSynthesis.cancel();
    window.speechSynthesis.speak(msg);
}

// Gomb megnyom√°s√°ra hallgat√°s
function startListening() {
    alert("Mikrofon enged√©lyezve? Besz√©lj most!");
    recognition.start();
}

// Eredm√©ny feldolgoz√°sa
recognition.onresult = (event) => {
    const text = event.results[0][0].transcript.toLowerCase();
    document.getElementById("log").innerText = "Te: " + text;
    alert("Felismerte: " + text); // popup minden felismert sz√≥r√≥l

    if (text.includes("h√©tf≈ë")) {
        mode = "komoly";
        speak("Rendben. Komoly m√≥d aktiv√°lva.");
        return;
    }

    if (text.includes("√∂reg")) {
        mode = "szarkasztikus";
        speak("Na v√©gre. Szarkazmus bet√∂ltve.");
        return;
    }

    let response = "";
    if (mode === "komoly") {
        response = "√ârtettem. Mit szeretn√©l tudni?";
    } else {
        response = "H√°t persze. √âs ezt most t≈ëlem k√©rdezed?";
    }

    speak(response);
};

// Hiba esem√©ny
recognition.onerror = (event) => {
    alert("Hiba a besz√©dfelismer√©sn√©l: " + event.error);
};
</script>

</body>
</html>
